/*!
 * meny 1.2G
 * http://lab.hakim.se/meny
 * MIT licensed
 *
 * Created by Hakim El Hattab (http://hakim.se, @hakimel)
 * Modifications by Jonny Gotham (http://jonnygotham.com, @jonnygotham)
 */
var Meny={create:function(a){return(function(){if(!a||!a.menuElement||!a.contentsElement){throw"You need to specify which menu and contents elements to use."}if(a.menuElement.parentNode!==a.contentsElement.parentNode){throw"The menu and contents elements must have the same parent."}var K="top",L="right",c="bottom",O="left";var G="WebkitPerspective" in document.body.style||"MozPerspective" in document.body.style||"msPerspective" in document.body.style||"OPerspective" in document.body.style||"perspective" in document.body.style;var E={width:300,height:300,position:O,threshold:40,overlap:6,transitionDuration:"0.5s",transitionEasing:"ease"};var e={menu:a.menuElement,contents:a.contentsElement,wrapper:a.menuElement.parentNode,cover:null};var B=e.wrapper.offsetLeft,A=e.wrapper.offsetTop,v=null,s=null,r=null,p=null,f=false,n=false;var m,k,H,o,P,W,T,y,d,C;var x,z,F;Meny.extend(E,a);j();h();w();D();R();if(E.threshold){S()}else{g()}function j(){H="";T="";switch(E.position){case K:m="50% 0%";k="rotateX( 30deg ) translateY( -100% ) translateY( "+E.overlap+"px )";W="50% 0";y="translateY( "+E.height+"px ) rotateX( -15deg )";o={top:"-"+(E.height-E.overlap)+"px"};P={top:"0px"};d={top:"0px"};C={top:E.height+"px"};break;case L:m="100% 50%";k="rotateY( 30deg ) translateX( 100% ) translateX( -2px ) scale( 1.01 )";W="100% 50%";y="translateX( -"+E.width+"px ) rotateY( -15deg )";o={right:"-"+(E.width-E.overlap)+"px"};P={right:"0px"};d={left:"0px"};C={left:"-"+E.width+"px"};break;case c:m="50% 100%";k="rotateX( -30deg ) translateY( 100% ) translateY( -"+E.overlap+"px )";W="50% 100%";y="translateY( -"+E.height+"px ) rotateX( 15deg )";o={bottom:"-"+(E.height-E.overlap)+"px"};P={bottom:"0px"};d={top:"0px"};C={top:"-"+E.height+"px"};break;default:m="100% 50%";k="translateX( -100% ) translateX( "+E.overlap+"px ) scale( 1.01 ) rotateY( -30deg )";W="0 50%";y="translateX( "+E.width+"px ) rotateY( 15deg )";o={left:"-"+(E.width-E.overlap)+"px"};P={left:"0px"};d={left:"0px"};C={left:E.width+"px"};break}}function h(){Meny.addClass(e.wrapper,"meny-"+E.position);e.wrapper.style[Meny.prefix("perspective")]="800px";e.wrapper.style[Meny.prefix("perspectiveOrigin")]=W}function w(){e.cover=document.createElement("div");e.cover.style.position="absolute";e.cover.style.display="block";e.cover.style.width="100%";e.cover.style.height="100%";e.cover.style.left=0;e.cover.style.top=0;e.cover.style.zIndex=1000;e.cover.style.visibility="hidden";e.cover.style.opacity=0;try{e.cover.style.background="rgba( 0, 0, 0, 0.4 )";e.cover.style.background="-ms-linear-gradient("+E.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";e.cover.style.background="-moz-linear-gradient("+E.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)";e.cover.style.background="-webkit-linear-gradient("+E.position+", rgba(0,0,0,0.20) 0%,rgba(0,0,0,0.65) 100%)"}catch(X){}if(G){e.cover.style[Meny.prefix("transition")]="all "+E.transitionDuration+" "+E.transitionEasing}e.contents.appendChild(e.cover)}function D(){var X=e.menu.style;switch(E.position){case K:X.width="100%";X.height=E.height+"px";break;case L:X.right="0";X.width=E.width+"px";X.height="100%";break;case c:X.bottom="0";X.width="100%";X.height=E.height+"px";break;case O:X.width=E.width+"px";X.height="100%";break}X.position="fixed";X.display="block";X.zIndex=1;if(G){X[Meny.prefix("transform")]=k;X[Meny.prefix("transformOrigin")]=m;X[Meny.prefix("transition")]="all "+E.transitionDuration+" "+E.transitionEasing}else{Meny.extend(X,o)}}function R(){var X=e.contents.style;if(G){X[Meny.prefix("transform")]=T;X[Meny.prefix("transformOrigin")]=W;X[Meny.prefix("transition")]="all "+E.transitionDuration+" "+E.transitionEasing}else{X.position=X.position.match(/relative|absolute|fixed/gi)?X.position:"relative";Meny.extend(X,d)}}function S(){if("ontouchstart" in window){Meny.bindEvent(document,"touchstart",M);Meny.bindEvent(document,"touchend",I)}else{Meny.bindEvent(document,"mousedown",N);Meny.bindEvent(document,"mouseup",V);Meny.bindEvent(document,"mousemove",b)}}function g(){Meny.bindEvent(document,"touchstart",M);Meny.bindEvent(document,"touchend",I)}function u(){if(!f){f=true;Meny.addClass(e.wrapper,"meny-active");e.cover.style.height=e.contents.scrollHeight+"px";e.cover.style.visibility="visible";if(G){e.cover.style.opacity=1;e.contents.style[Meny.prefix("transform")]=y;e.menu.style[Meny.prefix("transform")]=H}else{x&&x.stop();x=Meny.animate(e.menu,P,500);z&&z.stop();z=Meny.animate(e.contents,C,500);F&&F.stop();F=Meny.animate(e.cover,{opacity:1},500)}Meny.dispatchEvent(e.menu,"open")}}function J(){if(f){f=false;Meny.removeClass(e.wrapper,"meny-active");if(G){e.cover.style.visibility="hidden";e.cover.style.opacity=0;e.contents.style[Meny.prefix("transform")]=T;e.menu.style[Meny.prefix("transform")]=k}else{x&&x.stop();x=Meny.animate(e.menu,o,500);z&&z.stop();z=Meny.animate(e.contents,d,500);F&&F.stop();F=Meny.animate(e.cover,{opacity:0},500,function(){e.cover.style.visibility="hidden"})}Meny.dispatchEvent(e.menu,"close")}}function N(X){n=true}function b(aa){if(!n){var X=aa.clientX-B,ab=aa.clientY-A;switch(E.position){case K:if(ab>E.height){J()}else{if(ab<E.threshold){u()}}break;case L:var Y=e.wrapper.offsetWidth;if(X<Y-E.width){J()}else{if(X>Y-E.threshold){u()}}break;case c:var Z=e.wrapper.offsetHeight;if(ab<Z-E.height){J()}else{if(ab>Z-E.threshold){u()}}break;case O:if(X>E.width){J()}else{if(X<E.threshold){u()}}break}}}function V(X){n=false}function M(X){v=X.touches[0].clientX-B;s=X.touches[0].clientY-A;r=null;p=null;Meny.bindEvent(document,"touchmove",Q)}function Q(Y){r=Y.touches[0].clientX-B;p=Y.touches[0].clientY-A;var X=null;if(Math.abs(r-v)>Math.abs(p-s)){if(r<v-E.threshold){X=U}else{if(r>v+E.threshold){X=q}}}else{if(p<s-E.threshold){X=t}else{if(p>s+E.threshold){X=i}}}if(X&&X()){Y.preventDefault()}}function I(X){Meny.unbindEvent(document,"touchmove",Q);if(r===null&&p===null){l()}}function l(){var X=(E.position===K&&s>E.height)||(E.position===L&&v<e.wrapper.offsetWidth-E.width)||(E.position===c&&s<e.wrapper.offsetHeight-E.height)||(E.position===O&&v<E.width);if(X){J()}}function q(){if(E.position===L&&f){J();return true}else{if(E.position===O&&!f){u();return true}}}function U(){if(E.position===L&&!f){u();return true}else{if(E.position===O&&f){J();return true}}}function i(){if(E.position===c&&f){J();return true}else{if(E.position===K&&!f){u();return true}}}function t(){if(E.position===c&&!f){u();return true}else{if(E.position===K&&f){J();return true}}}return{open:u,close:J,isOpen:function(){return f},addEventListener:function(X,Y){e.menu&&Meny.bindEvent(e.menu,X,Y)},removeEventListener:function(X,Y){e.menu&&Meny.unbindEvent(e.menu,X,Y)}}})()},animate:function(b,a,c,d){return(function(){var g={};for(var j in a){g[j]={start:parseFloat(b.style[j])||0,end:parseFloat(a[j]),unit:(typeof a[j]==="string"&&a[j].match(/px|em|%/gi))?a[j].match(/px|em|%/gi)[0]:""}}var i=Date.now(),e;function h(){var k=1-Math.pow(1-((Date.now()-i)/c),5);for(var m in g){var l=g[m];b.style[m]=l.start+((l.end-l.start)*k)+l.unit}if(k<1){e=setTimeout(h,1000/60)}else{d&&d();f()}}function f(){clearTimeout(e)}h();return{stop:f}})()},extend:function(d,c){for(var e in c){d[e]=c[e]}},prefix:function(e,d){var b=e.slice(0,1).toUpperCase()+e.slice(1),g=["Webkit","Moz","O","ms"];for(var c=0,a=g.length;c<a;c++){var f=g[c];if(typeof(d||document.body).style[f+b]!=="undefined"){return f+b}}return e},addClass:function(b,a){b.className=b.className.replace(/\s+$/gi,"")+" "+a},removeClass:function(b,a){b.className=b.className.replace(a,"")},bindEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{a.attachEvent("on"+c,b)}},unbindEvent:function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{a.detachEvent("on"+c,b)}},dispatchEvent:function(b,c,a){if(b){var d=document.createEvent("HTMLEvents",1,2);d.initEvent(c,true,true);Meny.extend(d,a);b.dispatchEvent(d)}},getQuery:function(){var a={};location.search.replace(/[A-Z0-9]+?=([\w|:|\/\.]*)/gi,function(b){a[b.split("=").shift()]=b.split("=").pop()});return a}};if(typeof Date.now!=="function"){Date.now=function(){return new Date().getTime()}};